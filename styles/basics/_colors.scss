/*
  color helper functions + mixins
*/

@function contrast($color) {
  @if (lightness($color) > 40) {
    @return color(white);
  }
  @return color(black);
}

@function tint($color, $percentage) {
  @return mix(white, $color, $percentage);
}

@function shade($color, $percentage) {
  @return mix(black, $color, $percentage);
}


/*
  named colors
*/

$color-smoke: #e4e2e3;
$color-sea: #247783;
$color-dusk: #613d82;


/*
  color by name
*/

$colors: (
  primary: $color-sea,
  accent: $color-dusk,
  black: shade($color-smoke, 76%),
  white: tint($color-dusk, 99%),

  neutral: (
    1: tint($color-smoke, 67%),
    2: tint($color-smoke, 39%),
    3: $color-smoke,
    4: shade($color-smoke, 5%),
  ),
);


/*
  color accessor function
*/

@function color($keys...) {
  $value: $colors;

  @if length($keys) == 1 {
    @if nth($keys, 1) == neutral { @return color(neutral, 3); }
  }

  @each $key in $keys {
    $value: map-get($value, $key);
  }

  @return $value;
}


/*
  color swatches
*/

@mixin swatch($background, $background-value: $background) {
  background: $background-value;
  position: relative;

  &,
  &::after { 
    @include size(6rem);
    align-items: center;
    border-radius: 50%;
    display: inline-grid;
    justify-content: center;
  }

  &::after {
    content: '#{$background} #{$background-value}';
    font-size: .75rem;
    font-weight: 500;
    left: 50%;
    min-width: 4rem;
    position: absolute;
    transform: translateX(-2rem);
    text-align: center;
    // add break after every word
    overflow: visible;
    width: 0;
  }
}


/*
  initial color swatches
*/

$swatches-initial: (
  primary: color(primary),
  accent: color(accent),
  black: color(black),
  neutral: color(neutral),
  white: color(white),
);

@each $name, $color in $swatches-initial {
  .swatch.#{'' + $name} {
    @include swatch($name, $color);
  }
}

.swatch.primary,
.swatch.accent,
.swatch.black {
  color: color(white);
}

.swatch.white {
  border: 1px solid color(neutral);
}


/*
  neutral color swatches
*/

$swatches-neutral: (
  1: color(neutral, 1),
  2: color(neutral, 2),
  3: color(neutral, 3),
  4: color(neutral, 4),
);

@each $name, $color in $swatches-neutral {
  .swatch.#{'neutral-' + $name} {
    @include swatch(#{'neutral-' + $name}, $color);
  }
}

.swatch.neutral-1,
.swatch.neutral-2 {
  border: 1px solid color(neutral);
}
